install:ci:
  summary: install the necessary dependencies to run in CI. does not run `install`
  command: |-
    go get \
        golang.org/x/tools/cmd/cover \
        github.com/mattn/goveralls \
        github.com/mitchellh/gox

install:
  summary: install the dependencies to develop locally
  command: go get -v ./...

test:coverage:
  summary: run the tests, generate a coverage report, and report it to coveralls
  command: |-
    go test -v -covermode=atomic -coverprofile=coverage.out ./...
    $HOME/gopath/bin/goveralls -coverprofile=coverage.out -service=travis-ci -repotoken $COVERALLS_TOKEN

build:
  summary: build executable in all supported architectures
  command: |-
    gox -os="linux darwin windows" -arch="amd64" -output="bin/graphql-gateway_{{"{{"}}.OS}}_{{"{{"}}.Arch}}" -verbose ./...
